var Directory={getDirectoryData:function(t){return $.ajax({url:"/api/Directory/GetReleInfo",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json"})},getDirectoryMenuData:function(t){return $.ajax({url:"/api/Directory/GetReleMenu",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json"})}};function DirectoryGetDataInit(){var t,e;$(".catalog_frame").each((function(){var a=$(this);a.data("dirid")&&a.data("shownum")&&(t=a.data("dirid"),1,e=a.data("shownum"),DirectoryDataGet(a,t,1,e))})),$(".menu_directory").each((function(){var t=$(this);1!=t.data("init")&&t.data("dirid")>0&&(Directory.getDirectoryMenuData({Id:t.data("dirid"),WebsiteId:"undefined"!=typeof SiteId?SiteId:0}).done((function(e){t.find(".title").text(e.title),$.each(e.children,(function(a,i){if(t.find(".title").text(e.title),null!=i.children){var n=$($("#TemplateAccordionItem").html()).clone();n.find(".sectitle").text(i.title),n.find(".accordion-header").attr("id",`secheader${i.Id}`),n.find(".accordion-collapse").attr({"aria-labelledby":`secheader${i.Id}`,id:`seccollapse${i.Id}`}),n.find(".accordion-button").attr({"data-bs-target":`#seccollapse${i.Id}`,"aria-controls":`seccollapse${i.Id}`});var r=n.find(".accordion-body");$.each(i.children,(function(t,e){r.append(`<a href="${e.routerName}" title="連結至：${e.title}" class="list-group-item list-group-item-action border-0 py-3">${e.title}</a>`)})),t.find(".accordion").append(n)}else{var o=`<div class="accordion-item border-0 border-bottom px-1"><a href="${i.routerName}" title="連結至：${i.title}" class="list-group-item border-0 py-3 custom_h5 text-black">${i.title}</a></div>`;t.find(".accordion").append(o)}}))})),t.data("init",!0))}))}function DirectoryDataGet(t,e,a,i){Directory.getDirectoryData({Ids:[e],SiteId:"undefined"==typeof SiteId?0:SiteId,Page:a,ShowNum:i}).done((function(e){if(!t.data("init")){for(var n=1;n<=e.totalPage;n++)t.find(".page_btn").children(".btn_next").before(`<li class="page-item"><button class="btn_page page-link text-black" data-page=${n}>${n}</button></li>`);$(".btn_prev > button").on("click",(function(){a>1&&(t.find(".catalog").children().each((function(){var t=$(this);t.hasClass("templatecontent")||t.remove()})),a--,DirectoryDataGet(t,a,i))})),$(".btn_page").on("click",(function(){var e=$(this);a!=e.data("page")&&(t.find(".catalog").children().each((function(){var t=$(this);t.hasClass("templatecontent")||t.remove()})),a=e.data("page"),DirectoryDataGet(t,a,i))})),$(".btn_next > button").on("click",(function(){a<e.totalPage&&(t.find(".catalog").children().each((function(){var t=$(this);t.hasClass("templatecontent")||t.remove()})),a++,DirectoryDataGet(t,a,i))}))}t.data("init","true"),DirectoryDataInsert(t,e.releInfos)}))}function DirectoryDataInsert(t,e){e.forEach((function(e){var a=$(t.find(".templatecontent").html()).clone();a.find("a").attr("href",e.link),a.find("a").attr("alt",e.name),a.find("img").attr("src",e.mainImage),a.find("img").attr("alt",void 0===e.name?"":`${e.name}的主要圖片`),a.find("a").attr("href",e.link),a.find(".title").text(e.title),a.find(".description").text(e.description),t.find(".catalog").append(a)})),HoverEffectInit()}