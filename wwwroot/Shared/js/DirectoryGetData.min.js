var Directory={getDirectoryData:function(t){return $.ajax({url:"/api/Directory/GetReleInfo",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json"})},getDirectoryMenuData:function(t){return $.ajax({url:"/api/Directory/GetReleMenu",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json"})}};function DirectoryGetDataInit(){var t;$(".catalog_frame").each((function(){var a=$(this),e=a.data("dirid")>0?a.data("dirid"):a.attr("data-dirid")>0?a.attr("data-dirid"):0;void 0!==a.data("prevdirid")&&e==a.data("prevdirid")||(a.data("prevdirid",e),a.data("dirid")&&a.data("shownum")&&(e=a.data("dirid"),1,t=a.data("shownum"),DirectoryDataGet(a,e,1,t)))})),$(".menu_directory").each((function(){var t=$(this),a=t.data("dirid")>0?t.data("dirid"):t.attr("data-dirid")>0?t.attr("data-dirid"):0;void 0!==t.data("prevdirid")&&a==t.data("prevdirid")||(t.data("prevdirid",a),t.find(".title").text(""),t.find(".accordion").empty(),Directory.getDirectoryMenuData({Id:a,WebsiteId:"undefined"!=typeof SiteId?SiteId:0}).done((function(a){void 0!==a&&(t.find(".title").text(a.title),$.each(a.children,(function(e,i){if(t.find(".title").text(a.title),null!=i.children){var n=$($("#TemplateAccordionItem").html()).clone();n.find(".sectitle").text(i.title),n.find(".accordion-header").attr("id",`secheader${i.Id}`),n.find(".accordion-collapse").attr({"aria-labelledby":`secheader${i.Id}`,id:`seccollapse${i.Id}`}),n.find(".accordion-button").attr({"data-bs-target":`#seccollapse${i.Id}`,"aria-controls":`seccollapse${i.Id}`});var r=n.find(".accordion-body");$.each(i.children,(function(t,a){r.append(`<a href="${a.routerName}" title="連結至：${a.title}" class="list-group-item list-group-item-action border-0 py-3">${a.title}</a>`)})),t.find(".accordion").append(n)}else{var d=`<div class="accordion-item border-0 border-bottom px-1"><a href="${i.routerName}" title="連結至：${i.title}" class="list-group-item border-0 py-3 custom_h5 text-black">${i.title}</a></div>`;t.find(".accordion").append(d)}})))})))}))}function DirectoryDataGet(t,a,e,i){Directory.getDirectoryData({Ids:[a],SiteId:"undefined"==typeof SiteId?0:SiteId,Page:e,ShowNum:i}).done((function(a){if(!t.data("init")){for(var n=1;n<=a.totalPage;n++)t.find(".page_btn").children(".btn_next").before(`<li class="page-item"><button class="btn_page page-link text-black" data-page=${n}>${n}</button></li>`);$(".btn_prev > button").on("click",(function(){e>1&&(t.find(".catalog").children().each((function(){var t=$(this);t.hasClass("templatecontent")||t.remove()})),e--,DirectoryDataGet(t,e,i))})),$(".btn_page").on("click",(function(){var a=$(this);e!=a.data("page")&&(t.find(".catalog").children().each((function(){var t=$(this);t.hasClass("templatecontent")||t.remove()})),e=a.data("page"),DirectoryDataGet(t,e,i))})),$(".btn_next > button").on("click",(function(){e<a.totalPage&&(t.find(".catalog").children().each((function(){var t=$(this);t.hasClass("templatecontent")||t.remove()})),e++,DirectoryDataGet(t,e,i))}))}t.data("init","true"),DirectoryDataInsert(t,a.releInfos)}))}function DirectoryDataInsert(t,a){a.forEach((function(a){var e=$(t.find(".templatecontent").html()).clone();e.find("a").attr("href",window.location.pathname+a.link),e.find("a").attr("alt",a.name);var i=a.mainImage;"undefined"!=typeof IsFaPage&&"undefined"!=typeof OrgName&&"True"!=IsFaPage&&(i=i.replace("upload",`upload/${OrgName}`)),e.find("img").attr("src",i),e.find("img").attr("alt",void 0===a.name?"":`${a.name}的主要圖片`),e.find(".title").text(a.title),e.find(".description").text(a.description),t.find(".catalog").append(e)})),HoverEffectInit()}