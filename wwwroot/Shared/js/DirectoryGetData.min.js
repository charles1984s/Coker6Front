var Directory={getDirectoryData:function(e){return $.ajax({url:"/api/Directory/GetReleInfo",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"json"})},getDirectoryMenuData:function(e){return $.ajax({url:"/api/Directory/GetReleMenu",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"json"})},getDirectoryAdvertiseData:function(e){return $.ajax({url:"/api/Directory/GetReleAd",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"json"})},SwitchPage:function(e){return $.ajax({url:"/api/Directory/SwitchPage",type:"POST",contentType:"application/json; charset=utf-8",headers:{Authorization:"Bearer "+localStorage.getItem("token")},data:JSON.stringify(e),dataType:"json"})}},Advertise={ActivityClick:function(e){return $.ajax({url:"/api/Advertise/ActivityClick/",type:"GET",contentType:"application/json; charset=utf-8",data:{FK_Aid:e}})},ActivityExposure:function(e){return $.ajax({url:"/api/Advertise/ActivityExposure/",type:"GET",contentType:"application/json; charset=utf-8",data:{FK_Aid:e}})}};function initElemntAndLoadDir(e,t){const a=e||$(".catalog_frame").first();var n=a.find(".templatecontent").siblings();if(n.length>0)for(i=0;i<n.length;i++)$(n[i]).hasClass("templatecontent-tag")||n[i].remove();const d=void 0!==a.data("dirid")?"string"==typeof a.data("dirid")?a.data("dirid").split(","):[a.data("dirid")]:0;a.data("prevdirid",d);const r=void 0!==a.data("shownum")?a.data("shownum"):12,o=void 0!==a.data("maxlen")&&""!=a.data("maxlen")?a.data("maxlen"):0,s=t?t.toString():location.hash.replace("#",""),l=a.hasClass("getlatlng"),c=void 0!==a.data("longitude")?a.data("longitude"):null,f=void 0!==a.data("latitude")?a.data("latitude"):null;if((void 0===a.data("page")||a.data("page")!=s)&&(t=isNaN(s)||""==s?"1":s,1!=d.length||""!==d[0])){const i={Ids:d,SiteId:"undefined"==typeof SiteId?0:SiteId,Page:t,ShowNum:r,MaxLen:void 0===o?0:o,Filters:a.data("filtered"),directoryType:a.data("directoryTypeChecked"),target:void 0===a.data("target")?null:a.data("target"),FindNearest:l,Longitude:c,Latitude:f};a.find(".catalog>.template").remove(),DirectoryDataGet(a,i),a.off("filter").on("filter",(function(){a.removeData("page"),initElemntAndLoadDir(e,t)})),a.data("page",t)}}function DirectoryGetDataInit(){const e=$(".catalog_frame").length;$(".catalog_frame").each((function(){const e=$(this),t=void 0!==e.data("dirid")?"string"==typeof e.data("dirid")?e.data("dirid").split(","):[e.data("dirid")]:0;void 0!==e.data("prevdirid")&&t==e.data("prevdirid")||initElemntAndLoadDir($(this))})),$(".menu_directory").each((function(){var e=$(this);const t=void 0!==e.data("dirid")?"string"==typeof e.data("dirid")?e.data("dirid").split(","):[e.data("dirid")]:0;var a=void 0!==e.attr("data-show-unvisible")&&"true"==e.attr("data-show-unvisible").toLowerCase();void 0!==e.data("prevdirid")&&t==e.data("prevdirid")||(e.data("prevdirid",t),e.find(".title").text(""),e.find(".accordion").empty(),Directory.getDirectoryMenuData({Ids:t,WebsiteId:"undefined"!=typeof SiteId?SiteId:0,showUnvisible:a}).done((function(t){if(void 0!==t){e.find(".title").text(t.title);const a=`#${e.find(".accordion").attr("id")}`;$.each(t.children,(function(i,n){if(e.find(".title").text(t.title),null!=n.children){var d=$($("#TemplateAccordionItem").html()).clone();d.find(".sectitle").text(n.title),d.find(".accordion-header").attr("id",`secheader${n.id}`);const t=d.find(".accordion-collapse").attr({"aria-labelledby":`secheader${n.id}`,id:`seccollapse${n.id}`,"data-bs-parent":`${a}`});d.find(".accordion-button").attr({"data-bs-target":`#seccollapse${n.id}`,"aria-controls":`seccollapse${n.id}`});var r=d.find(".accordion-body");$.each(n.children,(function(e,a){const i=$(`<a href="${a.routerName}" title="連結至：${a.title}" class="list-group-item list-group-item-action border-0 py-3">${a.title}</a>`);"undefined"!=typeof PageKey&&PageKey.toLowerCase()==a.routerName.toLowerCase()&&($(i).addClass("active"),$(t).collapse("show"),d.find(".accordion-header").addClass("active")),r.append(i)})),e.find(".accordion").append(d)}else{const t=null!=n.routerName&&""!=n.routerName?n.routerName:n.linkUrl;var o=$(`<div class="accordion-item border-0 border-bottom px-1"><a href="${t}" title="連結至：${n.title}" class="list-group-item border-0 py-3 custom_h5 text-black"><span>${n.title}<span></a></div>`);if(null!=n.imgUrl&&""!=n.imgUrl){const e=$('<img alt=" " />');null==n.overImgUrl||"undefined"!=typeof PageKey&&t.toLowerCase().indexOf(PageKey.toLowerCase())>=0?e.attr("src",n.imgUrl):e.attr("src",n.overImgUrl),$(o).find("a").removeClass("py-3").addClass("p-0 imgMenu").append(e)}"undefined"!=typeof PageKey&&PageKey.toLowerCase()==n.routerName.toLowerCase()&&$(o).find("a").addClass("active"),e.find(".accordion").append(o)}})),$(".selectList").length>0&&$(window).trigger("resize.selectList")}})))})),$(".advertise_directory").each((function(){const e=$(this),t=void 0!==e.data("dirid")?"string"==typeof e.data("dirid")?e.data("dirid").split(","):[e.data("dirid")]:0;Directory.getDirectoryAdvertiseData({Ids:t,WebsiteId:"undefined"!=typeof SiteId?SiteId:0,showUnvisible:!0}).done((function(t){DirectoryAdDataInsert(e,t)}))})),1==e&&("onhashchange"in window?window.onhashchange=hashChangeDirectory:setInterval(hashChangeDirectory,1e3))}function hashChangeDirectory(e){e?(initElemntAndLoadDir(),e.preventDefault()):console.log("HashChange錯誤")}function DirectoryDataGet(e,t){const a=$(".catalog_frame").length;let i=parseInt(t.Page);"search"==e.data("type")?$.extend(!0,t,{Type:"search",SearchText:e.data("search-text").toString(),StartDate:e.data("startDate"),EndDate:e.data("endDate")}):"undefined"!=e.data("type")&&$.extend(!0,t,{Type:e.data("type")}),Directory.getDirectoryData(t).done((function(n){let d=2;"search"==t.Type&&$(".searchCount").text(n.totalCount),e.find(".page-item").each((function(){var e=$(this);e.hasClass("btn_prev")||e.hasClass("btn_next")||e.remove()})),n.totalPage<=1?e.find(".page_btn").addClass("d-none"):e.find(".page_btn").removeClass("d-none"),i>n.totalPage?i=n.totalPage:i<1&&(i=1),1==i?e.find(".btn_prev").addClass("d-none"):e.find(".btn_prev").removeClass("d-none"),i==n.totalPage?e.find(".btn_next").addClass("d-none"):e.find(".btn_next").removeClass("d-none"),1!=i&&i!=n.totalPage||(d=4);for(var r=1;r<=n.totalPage;r++)1==r?r==i?e.find(".page_btn").children(".btn_next").before(`<li class="page-item"><span class="btn_page page-link text-black bg-secondary" data-page=${r}>1</span></li>`):(e.find(".page_btn").children(".btn_next").before(`<li class="page-item"><button class="btn_page page-link text-black" title="第一頁" data-page=${r}>1</button></li>`),i-d-1>0&&e.find(".page_btn").children(".btn_next").before('<li class="page-item px-2">...</li>')):r==n.totalPage?r==i?e.find(".page_btn").children(".btn_next").before(`<li class="page-item"><span class="btn_page page-link text-black bg-secondary" data-page=${r}>${n.totalPage}</span></li>`):(i+d+1<n.totalPage&&e.find(".page_btn").children(".btn_next").before('<li class="page-item px-2">...</li>'),e.find(".page_btn").children(".btn_next").before(`<li class="page-item"><button class="btn_page page-link text-black" title="最後一頁" data-page=${r}>${n.totalPage}</button></li>`)):r>=i-d&&r<=i+d&&(r==i?e.find(".page_btn").children(".btn_next").before(`<li class="page-item"><span class="btn_page page-link text-black bg-secondary" data-page=${r}>${r}</span></li>`):e.find(".page_btn").children(".btn_next").before(`<li class="page-item"><button class="btn_page page-link text-black" title="移動至第${r}頁" data-page=${r}>${r}</button></li>`));if($(".btn_page").off("click").on("click",(function(){var t=$(this);i!=t.data("page")&&(i=t.data("page"),1==a&&window.location.hash!=`#${i}`?window.location.hash=`#${i}`:initElemntAndLoadDir(e,i)),e.goTo()})),e.data("init")||(e.find(".btn_prev > button").on("click",(function(){var t=$(this);i=parseInt(e.data("page"))-1,t.data("page",i),i>=1&&(1==a&&window.location.hash!=`#${i}`?window.location.hash=`#${i}`:initElemntAndLoadDir(e,t.data("page"))),e.goTo()})),e.find(".btn_next > button").on("click",(function(){var t=$(this);i=parseInt(e.data("page"))+1,t.data("page",i),i<=n.totalPage&&(1==a&&window.location.hash!=`#${i}`?window.location.hash=`#${i}`:initElemntAndLoadDir(e,t.data("page"))),e.goTo()}))),e.data("init","true"),n.releInfos.length>0&&1==n.releInfos[0].type){("string"==typeof e.data("hasbuybtn")?"true"===e.data("hasbuybtn").toLowerCase():e.data("hasbuybtn"))&&($("#btn_car_dropdown").length>0||"undefined"==typeof OrgName)?e.addClass("hasBuyBtn"):e.removeClass("hasBuyBtn"),"undefined"==typeof islogin&&"undefined"!=typeof OrgName?Coker.Token.CheckToken().done((function(t){t.success&&(islogin=t.isLogin),DirectoryDataInsert(e,n.releInfos)})):DirectoryDataInsert(e,n.releInfos)}else e.find(".btn_addToCar").length>0&&e.find(".btn_addToCar").addClass("d-none"),DirectoryDataInsert(e,n.releInfos);if(e.data({filter:n.filter,directoryType:n.directoryType}).trigger("load"),e.hasClass("swiper")||e.find(".swiper").length>0||e.hasClass("swiper-wrapper")){let t,a;t=e.hasClass("swiper")?e:e.find(".swiper").length>0?e.find(".swiper"):e.parents(".swiper"),a=$(t).parents('[class*="_swiper"]'),$(a).length>0&&(void 0!==$(a).data("isInit")&&$(a).data("isInit")&&t[0].swiper.destroy(!0,!0),a.data("isInit",!1),SwiperInit({autoplay:!0}))}}))}function DirectoryDataInsert(e,t){if(null==t)return;const a=e.find(".templatecontent").html(),i=e.find(".templatecontent-tag").html(),n="search"==e.data("type"),d=void 0===e.data("dirpath")?"":e.data("dirpath").toLowerCase();0==t.length?e.find(".catalog").addClass("empty"):e.find(".catalog").removeClass("empty"),e.hasClass("hover_display_details")&&"undefined"!=typeof OrgName&&t.length>0&&(""!=t[0].mainImage?(e.data("default_img_link",t[0].mainImage),e.find(".details_display").attr("src",t[0].mainImage)):e.data("default_img_link",e.find(".details_display").attr("src"))),null!=t&&t.forEach((function(t){var r=$(a).clone();if(e.hasClass("hover_display_details")&&"undefined"!=typeof OrgName&&r.data("img_link",t.mainImage),e.hasClass("hasBuyBtn"))if(r.find(".btn_addToCar").length>0)r.find(".btn_addToCar").removeClass("d-none");else{r.find("div").first().find("a").first().after('<div class="btn_addToCar"><button>瀏覽商品</button></div>')}else r.find(".btn_addToCar").length>0&&r.find(".btn_addToCar").addClass("d-none");let o,s;if(n||window.location.pathname.toLowerCase().indexOf("search")>0||window.location.pathname.toLowerCase().indexOf("techcert")>0){var l=t.link.split("?filter=");t.link=l[0];var c=l.length>1?"?filter="+l[1]:"";if(3===t.type)o=`${null==t.orgName?"":`/${t.orgName}`}/${t.link}`;else o=`${null==t.orgName?"":`/${t.orgName}`}/search/${t.link}`;if(void 0!==e.data("search-text")&&""!=e.data("search-text")&&(o=`${o}/${encodeURIComponent(e.data("search-text"))}${c}`),s="_blank",t.mainImage.indexOf("youtu")>0){var f="",p=t.mainImage.match(/^.*(?:(?:youtu.be\/|v\/|vi\/|u\/w\/|embed\/)|(?:(?:watch)??v(?:i)?=|&v(?:i)?=))([^#&?]*).*/);null!=p&&p.length>0&&(f=p[1]),t.mainImage="https://img.youtube.com/vi/"+f+"/mqdefault.jpg"}}else{if(o=window.location.pathname.indexOf(t.orgName)>0&&window.location.pathname.toLowerCase().indexOf("home")<0&&window.location.pathname.toLowerCase().indexOf(d)>=0?window.location.pathname:`${null==t.orgName?"":`/${t.orgName}`}${""==d?null==t.orgName?window.location.pathname:window.location.pathname.toLowerCase().replace(`${t.orgName.toLowerCase()}`,""):`/${d}`}`,void 0!==e.data("pageto")&&""!=e.data("pageto")){var g=o.substring(1).indexOf("/")+1;o=o.substring(0,g+1)+e.data("pageto")}o+=t.link,s="_self"}1==t.type&&0!=t.status&&r.find("a").append(`<span class="status status${t.status}">${t.statusName}</span>`),/^http/.test(o)||(o=o.replace("//","/"));const m={href:o,title:`連結至: ${t.title}${"_blank"==s?"(另開視窗)":""}`,target:s};r.length>0&&("A"==r[0].tagName?r.attr(m):r.find("a").attr(m)),e.hasClass("cross_graphics_frame")&&""==t.mainImage&&r.children("div:first").addClass("d-none"),e.hasClass("getlatlng")&&(r.find(".dirname").text(t.dirname),r.find(".dirname").removeClass("d-none"));var h=t.mainImage||"/images/noImg.jpg";if(null!=t.orgName&&("undefined"!=typeof IsFaPage&&"undefined"!=typeof OrgName&&!IsFaPage||"undefined"!=typeof OrgName&&OrgName!=t.orgName)&&(h=h.replace("upload",`upload/${t.orgName}`)),r.find("img").attr("src",h),r.find("img").imgCheck().attr("alt",`${t.title}的主要圖片`),r.find(".title").text(t.title),r.find(".subtitle").text(t.subtitle),r.find(".description").html(t.description),r.is("a")?r.find("img").length&&r.find("h3,h4,h5,h6,span,p").length&&r.find("img").imgCheck().attr("alt"," "):r.find("a img").length&&r.find("a").find("h3,h4,h5,h6,span,p").length&&r.find("img").imgCheck().attr("alt"," "),r.find(".location").length>0&&(null==t.location||""==t.location)?r.find(".location").parents(".py-2").remove():r.find(".location").text(t.location),r.find(".address").length>0&&(null==t.address||""==t.address)?r.find(".address").parents(".py-2").remove():r.find(".address").text(t.address),null!=t.startTime&&""!=t.startTime){var u=new Date(t.startTime);r.find(".startTime").text(`${u.getFullYear()}/${u.getMonth()+1}/${u.getDate()}`)}else r.find(".startTime").each(((e,t)=>{"span"==t.tagName.toLowerCase()?$(t).parent().remove():$(t).remove()}));if(null!=t.nodeDate&&""!=t.nodeDate){var v=new Date(t.nodeDate);r.find(".date").text(`${v.getFullYear()}/${v.getMonth()+1}/${v.getDate()}`),r.find(".date-month").text(`${v.getMonth()+1}月`),r.find(".date-monthyear").text(`${v.getMonth()+1}/${v.getFullYear()}`),v.getDate()<10?r.find(".date-day").text(`0${v.getDate()}`):r.find(".date-day").text(`${v.getDate()}`),v.getMonth()<9?r.find(".date-month-number").text(`0${v.getMonth()+1}`):r.find(".date-month-number").text(`${v.getMonth()+1}`),r.find(".date-year").text(`${v.getFullYear()}`)}else r.find(".date,.date-month,date-monthyear,date-day").each(((e,t)=>{"span"==t.tagName.toLowerCase()?$(t).parent().remove():$(t).remove()}));if(null!=t.price)if(null!=t.suggestPrice&&t.suggestPrice!=t.price){r.find(".price-grid").removeClass("price"),r.find(".normal-price").removeClass("price"),r.find(".normal-price").addClass("text-end"),r.find(".price-grid").empty(),r.find(".normal-price").empty();var y=`<div class="text-body-tertiary text-decoration-line-through">建議售價$${t.suggestPrice}</div><div class="text-danger"> $${t.price}</div>`;r.find(".price-grid").append(y),r.find(".normal-price").append(y)}else if(0!=t.oriPrice&&null!=t.oriPrice&&t.price!=t.oriPrice){r.find(".price-grid").removeClass("price"),r.find(".normal-price").removeClass("price"),r.find(".normal-price").addClass("text-end"),r.find(".price-grid").empty(),r.find(".normal-price").empty();y=`<div class="text-decoration-line-through">$${t.oriPrice}</div><div class="text-danger">會員價 $${t.price}</div>`;r.find(".price-grid").append(y),r.find(".normal-price").append(y)}else r.find(".normal-price").removeClass("price"),r.find(".price-grid").removeClass("price"),r.find(".normal-price").text(`$${t.price}`),r.find(".price-grid").text(`$${t.price}`);else r.find(".price").addClass("notshow"),r.find(".price").text("");if(null!=t.itemNo&&""!=t.itemNo?r.find(".itemNo").text(t.itemNo):r.find(".itemNo").remove(),$tags=r.find(".tags"),$tags.empty(),null==t.tags&&(t.tags=[]),t.tags.slice(0,2).forEach((e=>{let t=$(i).clone();t.text(e.tag_Name),t.data("tagname",e.tag_Name),$tags.append(t)})),t.tags.slice(2).forEach((e=>{let t=$(i).clone();t.text(e.tag_Name.slice(0,4)),t.data("tagname",e.tag_Name),t.addClass("more-tag d-none"),$tags.append(t)})),t.tags.length>2){let e=$(i).clone();e.text("..."),e.data("tagname","..."),e.addClass("less-tag"),$tags.append(e)}$tags.children().each((function(){var e=$(this);e.hasClass("less-tag")||e.on("click",(function(){var t=e.data("tagname");return location.href=`/${OrgName}/Search/Get/3/${encodeURIComponent(t)}`,!1}))})),r.find(".shareBlock").data("init",!1),r.find(".shareBlock > a").remove(),r.find(".shareBlock").data("href",o),1==t.type&&"undefined"!=typeof IsLogin&&IsLogin&&ProdFavBtnSet(r,t),e.find(".catalog").append(r),1==t.type&&r.find(".btn_addToCar").length>0&&r.find(".btn_addToCar").on("click",(function(){window.location.href=o}))})),HoverEffectInit(),ShareBlockInit();var r=window.location.pathname;if(r.indexOf("Search")>0)r=r.substring(0,r.indexOf("Search")+6);else if(r.lastIndexOf("_")>0){var o=r.substring(r.lastIndexOf("_")+1);$.isNumeric(o)&&(r=r.substring(0,r.lastIndexOf("_")))}if(void 0!==localStorage[`switchViewType-${r}`]&&n){var s=localStorage[`switchViewType-${r}`];$(`button.${s}`).trigger("click")}if(e.hasClass("hover_display_details")&&"undefined"!=typeof OrgName&&(e.find(".details_display_frame").css("height",e.find(".details_display_frame").height()),$(window).resize((function(){e.find(".details_display_frame").css("height",e.find(".details_display_frame").height()),void 0!==e.find(".details_display_frame").css("display")&&e.find(".details_display_frame").css("display")})),void 0!==e.find(".details_display_frame").css("display")&&"none"!=e.find(".details_display_frame").css("display")&&e.find(".catalog > div:not(.templatecontent)").on("mouseenter",(function(){var t=$(this).data("img_link"),a=e.find(".details_display"),i=a.attr("src");t!=i&&""!=t&&a.stop(!0,!0).fadeOut(200,(function(){a.attr("src",t).fadeIn(100)}))})).on("mouseleave",(function(){var t=e.data("default_img_link"),a=e.find(".details_display"),i=a.attr("src");t!=i&&a.stop(!0,!0).fadeOut(200,(function(){a.attr("src",t).fadeIn(100)}))}))),e.hasClass("swiper_display_details")&&"undefined"!=typeof OrgName){var l=e.find(".details_swiper_display_frame");if(void 0!==l.css("display")&&"none"!=l.css("display")){var c=l.find(".template_slide"),f=l.find(".swiper")[0].swiper;void 0!==f&&(f.autoplay.stop(),f.removeAllSlides(),t.forEach((function(e){if(""!=e.mainImage){var t=$(c.html()).clone();(t=DirectoryTemplateDataInsert(t,e)).find("img").attr({src:e.mainImage,alt:e.title}),f.appendSlide(t)}})),t.length>1&&f.autoplay.start())}}}function DirectoryTemplateDataInsert(e,t){var a="",i="",n="";if(void 0!==t.nodeDate){var d=new Date(t.nodeDate);a=d.getFullYear().toString(),i=(d.getMonth()+1).toString(),n=d.getDate().toString()}return e.find("*").each((function(){var e=$(this);if(void 0!==e.data("key")){var d=e.data("key");switch(d){case"year":e.text(a);break;case"month":e.text(i);break;case"date":e.text(n);break;case"link":e.attr("href",`${t[d]}`),e.attr("title",`連結至：${t.title}`);break;default:e.text(t[d])}}})),e}function ProdFavBtnSet(e,t){var a=`<button data-pid="${t.id}" class="btn_fav"></button>`;e.find(".shareBlock").after(a),e.find(".shareBlock").hasClass("d-none")?e.find(".btn_fav").addClass("d-none"):e.find(".shareBlock").hasClass("type5")&&e.find(".btn_fav").addClass("type5"),null!=t.fId&&(e.find(".btn_fav").data("fid",t.fId),e.find(".btn_fav").addClass("check"),e.find(".btn_fav").attr("title","移除收藏")),FavButtonInit(e.find(".btn_fav"))}function DirectoryAdDataInsert(e,t){if(e.find(".swiper").length>0)for(var a=e.find(".swiper-wrapper"),i=0;i<t.length;i++){var n=$(a.find(".templatecontent").html()).clone();n=InsertAdDatat(n,t[i]),a.append(n)}else e.find(".File_Frame").each((function(e){var a=$(this);t.length>e&&InsertAdDatat(a,t[e])}))}function InsertAdDatat(e,t){var a="undefined"!=typeof OrgName,i=t.fileLink[0],n=i.fileType;if(a||void 0===e.data("init")){switch(parseInt(n)){case 1:var d=e.find(".img_frame");d.find("img").attr("src",i.link),d.find("img").attr("alt",t.title),d.find("a").attr("href",t.link),d.find("a").attr("title","連結至"+t.title+(t.target?"(開新視窗)":"")),d.find("a").attr("target",t.target?"_blank":"_self"),e.find(".title").length>0&&(e.find(".title").text(t.title),e.find(".title").removeClass("d-none")),d.removeClass("d-none"),d.parent().children().not(".img_frame").not(".keep").remove();break;case 2:var r=e.find(".video_frame");r.find("video").attr("src",i.link),r.find("video").attr("type",i.video_Type),r.removeClass("d-none"),r.parent().children().not(".video_frame").remove();break;case 3:var o=e.find(".YT_frame");if(o.find("img").attr("src","https://img.youtube.com/vi/"+i.name+"/maxresdefault.jpg"),o.find("img").attr("alt",t.title),o.removeClass("d-none"),o.parent().find("div").not(".YT_frame").remove(),0==$("body").find("#YTPreviewModal").length){$("body").prepend('<div class="modal fade" id="YTPreviewModal" tabindex="-1" aria-labelledby="YTPreviewModal" aria-hidden="true">\n                                                  <div class="modal-dialog modal-xl">\n                                                    <div class="modal-content position-relative bg-black">\n                                                        <div class="modal-header">\n                                                        <button type="button" data-bs-dismiss="modal" aria-label="Close" class="bg-light btn-close rounded-circle"</button>\n                                                        </div>\n                                                        <div class="modal-body"></div>\n                                                    </div>\n                                                  </div>\n                                                </div>'),$("#YTPreviewModal").find(".modal-content").css("height","90vh"),document.getElementById("YTPreviewModal").addEventListener("hidden.bs.modal",(function(e){$("#YTPreviewModal").find(".modal-body").empty()}))}o.on("click",(function(){var e=`https://www.youtube-nocookie.com/embed/${i.name}?&autoplay=1`;$("#YTPreviewModal").find(".modal-body").append(`<iframe src="${e}" class="w-100 h-100" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`)})),o.parent().children().not(".YT_frame").remove()}var s;if(null!=t.describe&&e.find(".describe").length>0)(t.describe+"").split("\n").forEach((function(e,t){0==t?s=e:s+=`<br/>${e}`})),e.find(".describe").append(s);if(e.find(".tag").length>0){for(var l="",c=0;c<t.tagDatas.length;c++){l+=`<a href="${"undefined"==typeof OrgName?"":`/${OrgName}/Search/Get/${t.tagDatas[c].searchId}/${t.tagDatas[c].title}`}" title="連結至：${t.tagDatas[c].title}" class="pe-2">#${t.tagDatas[c].title}</a>`}e.find(".tag").append(l)}a&&Advertise.ActivityExposure(t.id).done((function(e){})),e.find(".video_frame").find("video").on("play",(function(){$(this).hasClass("playing")||($(this).addClass("playing"),Advertise.ActivityClick(t.id).done((function(e){})))})),e.find(".video_frame").find("video").on("ended",(function(){$(this).hasClass("playing")&&$(this).removeClass("playing")})),e.on("click",(function(){0==e.find(".video_frame").length&&Advertise.ActivityClick(t.id).done((function(e){}))})),e.find(".detectLang").each((function(){var e=$(this);const t=e.html().replace(/([a-zA-Z]+)/g,'<span class="english">$1</span>');e.html(t)})),e.data("init",!0)}return e}function FavButtonInit(e){e.on("click",(function(){$self=$(this),$self.hasClass("check")?void 0!==e.data("fid")&&""!=typeof e.data("fid")&&Coker.Favorites.Delete(e.data("fid")).done((function(t){t.success?(e.data("fid",""),$self.removeClass("check"),e.attr("title","加入收藏"),Coker.sweet.success("已將商品從收藏中移除",null,!0)):console.log(t.message)})):Coker.Favorites.Add(e.data("pid")).done((function(t){t.success?(e.data("fid",t.message),$self.addClass("check"),e.attr("title","移除收藏"),Coker.sweet.success("成功將商品加入收藏",null,!0)):console.log(t.message)}))}))}