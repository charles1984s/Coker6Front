function HeaderInit(){$(document).ready((function(){$("html, body").animate({scrollTop:$(".one_swiper").offset().top},"smooth")}));var t=$("#Mega_Menu").css("height");$("body").css("padding-top",t),$(window).resize((function(){var t=$("nav").css("height");$("body").css("padding-top",t)})),$("#Cart_Dropdown_Parent").length>0&&CartDropInit(),MenuLiSize(),$(window).resize((function(){MenuLiSize()}));const a=document.getElementById("Cart_Dropdown_Parent");null!=a&&(a.addEventListener("shown.bs.dropdown",(t=>{$("#btn_car_dropdown > i").addClass("open")})),a.addEventListener("hidden.bs.dropdown",(t=>{$("#btn_car_dropdown > i").removeClass("open")})));var e=$("#Mega_Menu>.offcanvas");e.on("hidden.bs.offcanvas",(function(){$("#menuButton").addClass("collapsed")})),e.on("shown.bs.offcanvas",(function(){$("#menuButton").removeClass("collapsed")})),$("#News_Marquee > .news_box").verticalLoop({delay:3e3,order:"asc"})}function MenuLiSize(){$(window).width()>768?($(".subtitle").removeClass("w-100"),$(".subtitle li").removeClass("w-100")):($(".subtitle").addClass("w-100"),$(".subtitle li").addClass("w-100")),$(window).width()>992?($(".offcanvas-body").removeClass("accordion"),$(".offcanvas-body .collapse").addClass("show"),$(".offcanvas-body  .nav-link[data-bs-toggle]").attr("data-bs-toggle","")):($(".offcanvas-body").addClass("accordion"),$(".offcanvas-body .collapse").removeClass("show"),$(".offcanvas-body  .nav-link[data-bs-toggle]").each(((t,a)=>{$(a).next("ul").length>0?$(a).attr("data-bs-toggle","collapse"):$(a).find(".material-symbols-outlined").remove()}))),$("#Offcanvas_Mega_Menu a").each((function(){const t=$(this);null!=t.attr("href").match(PageKey)&&t.parents(".collapse").addClass("show")}))}function CartDropInit(){Product.GetAll.Cart().done((function(t){if(t.length>0)for(var a=0;a<t.length;a++)CartDropAdd(t[a])}))}function CartDropAdd(t){var a=$($("#Template_Car_Dropdown").html()).clone(),e=a.find(".pro_link"),n=a.find(".pro_image"),o=a.find(".pro_name"),r=a.find(".pro_spec"),d=a.find(".pro_unit"),s=a.find(".pro_quantity"),i=a.find(".btn_cart_delete");a.data("scid",t.scId),e.attr("href",`${OrgName}/Toilet/${t.pId}`),n.attr("src",t.imagePath),o.text(t.title),r.append(""==t.s1Title?"":`<span class="border px-1 me-1">${t.s1Title}</span>`),r.append(""==t.s2Title?"":`<span class="border px-1">${t.s2Title}</span>`),d.text((t.price+"").toLocaleString("en-US")),s.text(t.quantity),i.on("click",(function(){var t=$(this).parents("li").first();Coker.sweet.confirm("確定將商品從購物車移除？","該商品將會從購物車中移除，且不可復原。","確認移除","取消",(function(){CartDropDelete(t,t.data("scid"),"成功移除商品","移除商品發生未知錯誤")}))})),$("#Car_Dropdown > ul").append(a);var l=""==$("#Car_Badge").text()?1:parseInt($("#Car_Badge").text())+1;$("#Car_Badge").text(l.toString()),$("#Car_Dropdown_Null").hasClass("d-none")||($("#Car_Dropdown_Null").addClass("d-none"),$("#Car_Dropdown > .btn_car_buy").removeAttr("disabled"))}function CartDropUpdate(t){$("#Car_Dropdown > ul > li").each((function(){var a=$(this);a.data("scid")==t.scId&&a.find(".pro_quantity").text(t.quantity)}))}function CartDropReset(t,a){$("#Car_Dropdown > ul > li").each((function(){$(this).data("scid")==t&&(0==a?($(this).remove(),$("#Car_Badge").text($("#Car_Badge").text()-1)):$(this).find(".pro_quantity").text(a))}))}function CartDropDelete(t,a,e,n){t.remove(),Product.Delete.Cart(a).done((function(){Coker.sweet.success(e,null,!0);var t=parseInt($("#Car_Badge").text())-1;$("#Car_Badge").text(t.toString()),0==parseInt($("#Car_Badge").text())&&CartClear()})).fail((function(){Coker.sweet.error("錯誤",n,null,!0)}))}function CartClear(){$("#Car_Dropdown > ul > li").remove(),$("#Car_Badge").text(""),$("#Car_Dropdown_Null").removeClass("d-none"),$("#Car_Dropdown > .btn_car_buy").attr("disabled","")}