function HeaderInit(){if(console.log($("#btnMenu.change-color").length),$("#btnMenu.change-color").length&&$("#btnMenu").on("click",(function(){$(this).find("#menuIcon").toggleClass("text-white")})),$(".navbar").hasClass("position-fixed")&&!$(".full-banner").length>0){var e=$("nav").css("height");$("#ContainerBody").css("padding-top",e),$(window).resize((function(){var e=$("nav").css("height");$("#ContainerBody").css("padding-top",e),MenuLiSize()}));var n=$(".navbar").outerHeight();$("#swiper-light").length?$("#header-title").length&&($("#header-title").css("padding-top",n),$("#header-title-phone").css("padding-top",n)):$("#ContainerBody").css("padding-top",n)}const a=document.querySelectorAll(".full-banner");if(a.length){function t(){$("nav").on("mouseover",(()=>{$("nav").removeClass("hide-menu")})),$("nav").on("mouseleave",(()=>{$("nav").addClass("hide-menu")}))}$("nav").hasClass("position-fixed")&&($("nav").addClass("hide-menu"),t()),window.addEventListener("scroll",(()=>{let e=window.scrollY;a.forEach((n=>{const a=n.getBoundingClientRect().top+window.scrollY,o=n.offsetHeight;e>=a&&e<a+o?($("nav").removeClass("show-menu").addClass("hide-menu"),t()):($("nav").addClass("show-menu").removeClass("hide-menu"),$("nav").off("mouseleave"),$("nav").off("mouseover"))}))}))}if(MenuLiSize(),moveHiUserToMenu(),$(window).width()>767){const r=document.getElementById("Cart_Dropdown_Parent");null!=r&&(r.addEventListener("shown.bs.dropdown",(e=>{$("#btn_car_dropdown > i").addClass("open")})),r.addEventListener("hidden.bs.dropdown",(e=>{$("#btn_car_dropdown > i").removeClass("open")})))}else $("#btn_car_dropdown").attr("data-bs-toggle",""),$("#btn_car_dropdown").on("click",(function(e){var n=window.location.origin+`/${OrgName}/ShoppingCar`;window.location.href=n}));var o=$("#Mega_Menu>.offcanvas");o.on("hidden.bs.offcanvas",(function(){$("#menuButton").addClass("collapsed")})),o.on("shown.bs.offcanvas",(function(){$("#menuButton").removeClass("collapsed")})),$("#News_Marquee > .news_box").verticalLoop({delay:3e3,order:"asc"})}function moveHiUserToMenu(){const e=document.getElementById("HiUser"),n=document.querySelector(".login"),a=document.querySelector(".offcanvas-header"),t=document.querySelector(".icon-block");if(window.innerWidth<=576){if(e)a.contains(e)||a.appendChild(e);else if(n&&!a.contains(n)&&(a.appendChild(n),!n.querySelector("p"))){const e=document.createElement("p");e.textContent="會員登入",n.appendChild(e)}}else $("#HiUser").length>0?t.contains(e)||t.appendChild(e):n&&(t.contains(n)||t.appendChild(n))}function MenuLiSize(){$(window).width()>768?($(".subtitle").removeClass("w-100"),$(".subtitle li").removeClass("w-100")):($(".subtitle").addClass("w-100"),$(".subtitle li").addClass("w-100")),$(window).width()>992?($(".offcanvas-body").removeClass("accordion"),$(".offcanvas-body .collapse").addClass("show"),$(".offcanvas-body  .nav-link[data-bs-toggle]").attr("data-bs-toggle","")):($(".offcanvas-body").addClass("accordion"),$(".offcanvas-body .collapse").removeClass("show"),$(".offcanvas-body  .nav-link[data-bs-toggle]").each(((e,n)=>{$(n).next("ul").length>0?$(n).attr("data-bs-toggle","collapse"):$(n).find(".material-symbols-outlined").remove()}))),$("#Offcanvas_Mega_Menu a").each((function(){const e=$(this);null!=e.attr("href").match(PageKey)&&e.parents(".collapse").addClass("show")}))}function CartDropInit(){Product.GetAll.Cart().done((function(e){if(e.length>0)for(var n=0;n<e.length;n++)CartDropAdd(e[n])}))}function CartDropAdd(e){var n=$($("#Template_Car_Dropdown").html()).clone();(n=HeaderDataInsert(n,e)).data("scid",e.scId),n.find(".btn_cart_delete").on("click",(function(){var e=$(this).parents("li").first();Coker.sweet.confirm("確定將商品從購物車移除？","該商品將會從購物車中移除，且不可復原。","確認移除","取消",(function(){CartDropDelete(e,e.data("scid"),"成功移除商品","移除商品發生未知錯誤")}))})),$("#Car_Dropdown > ul").append(n);var a=""==$("#Car_Badge").text()?1:parseInt($("#Car_Badge").text())+1;$("#Car_Badge").text(a.toString()),$("#Car_Dropdown_Null").hasClass("d-none")||($("#Car_Dropdown_Null").addClass("d-none"),$("#Car_Dropdown > .btn_car_buy").removeAttr("disabled"))}function CartDropUpdate(e){$("#Car_Dropdown > ul > li").each((function(){var n=$(this);n.data("scid")==e.scId&&n.find(".pro_quantity").text(e.quantity)}))}function CartDropReset(e,n){$("#Car_Dropdown > ul > li").each((function(){$(this).data("scid")==e&&(0==n?($(this).remove(),$("#Car_Badge").text($("#Car_Badge").text()-1)):$(this).find(".pro_quantity").text(n))}))}function CartDropDelete(e,n,a,t){e.remove(),Product.Delete.Cart(n).done((function(){Coker.sweet.success(a,null,!0);var e=parseInt($("#Car_Badge").text())-1;$("#Car_Badge").text(e.toString()),0==parseInt($("#Car_Badge").text())&&CartClear()})).fail((function(){Coker.sweet.error("錯誤",t,null,!0)}))}function CartClear(){$("#Car_Dropdown > ul > li").remove(),$("#Car_Badge").text(""),$("#Car_Dropdown_Null").removeClass("d-none"),$("#Car_Dropdown > .btn_car_buy").attr("disabled","")}function HeaderDataInsert(e,n){return e.find("*").each((function(){var e=$(this);if(void 0!==e.data("key")){var a=e.data("key");switch(a){case"link":e.attr({href:`/${OrgName}/home/product/${n.pId}`,title:`連結至：${n.title}`});break;case"spec":e.append(""==n.s1Title?"":`<span class="border px-1 me-1">${n.s1Title}</span>`),e.append(""==n.s2Title?"":`<span class="border px-1 me-1">${n.s2Title}</span>`);break;case"imagePath":n[a]=n[a].replaceAll(`/${OrgName}/`,"/"),e.attr({src:n[a],alt:`${n.title}的圖片`});break;case"oldQuantity":n[a]!=n.quantity&&e.removeClass("d-none"),e.text(n[a]);break;default:e.text(n[a])}if("price"===e.data("type"))e.text(parseInt(e.text()).toLocaleString())}})),e}