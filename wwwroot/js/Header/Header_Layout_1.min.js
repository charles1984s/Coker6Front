function HeaderInit(){console.log("Layout1");var t=$("nav").css("height");$("body").css("padding-top",t),$(window).resize((function(){var t=$("nav").css("height");$("body").css("padding-top",t)})),null!=$.cookie("Token")&&CartDropInit(),MenuLiSize(),$(window).resize((function(){MenuLiSize()}));const e=document.getElementById("Cart_Dropdown_Parent");e.addEventListener("shown.bs.dropdown",(t=>{$("#btn_car_dropdown > i").addClass("open")})),e.addEventListener("hidden.bs.dropdown",(t=>{$("#btn_car_dropdown > i").removeClass("open")}));var n=$("#Mega_Menu>.offcanvas");n.on("hidden.bs.offcanvas",(function(){$("#menuButton").addClass("collapsed")})),n.on("shown.bs.offcanvas",(function(){$("#menuButton").removeClass("collapsed")})),$("#News_Marquee > .news_box").verticalLoop({delay:3e3,order:"asc"}),$("#Offcanvas_Mega_Menu > ul > .title > .content > ul").each((function(){$(this).children("li").length<4?$(this).css("align-content","center"):$(this).css("align-content","start")}))}function MenuLiSize(){$(".sub_content").each((function(){var t=$(this);if($(window).width()>768){var e=t.parents(".content").first().width();if(t.children("li").length>0){if(t.children("li").length>7){var n=e/6*2;t.css("width",n)}t.css("height","100%"),t.parents("li").first().css("height","100%"),t.parents("li").first().css("padding-bottom","3rem")}else t.css("height","fit-content"),t.parents("li").first().css("height","fit-content")}else t.css("width","unset"),t.parents("li").first().css("padding-bottom","0")}))}function CartDropInit(){Product.GetAll.Cart($.cookie("Token")).done((function(t){if(t.length>0)for(var e=0;e<t.length;e++)CartDropAdd(t[e])}))}function CartDropAdd(t){var e=$($("#Template_Car_Dropdown").html()).clone(),n=e.find(".pro_link"),a=e.find(".pro_image"),r=e.find(".pro_name"),o=e.find(".pro_spec"),i=e.find(".pro_unit"),s=e.find(".pro_quantity"),d=e.find(".btn_cart_delete");e.data("scid",t.scId),n.attr("href",`${OrgName}/Toilet/${t.pId}`),a.attr("src",`../upload/product/pro_0${t.pId}.png`),r.text(t.title),o.append(""==t.s1Title?"":`<span class="border px-1 me-1">${t.s1Title}</span>`),o.append(""==t.s2Title?"":`<span class="border px-1">${t.s2Title}</span>`),i.text((t.price+"").toLocaleString("en-US")),s.text(t.quantity),d.on("click",(function(){var t=$(this).parents("li").first();Coker.sweet.confirm("確定將商品從購物車移除？","該商品將會從購物車中移除，且不可復原。","確認移除","取消",(function(){CartDropDelete(t,t.data("scid"),"成功移除商品","移除商品發生未知錯誤")}))})),$("#Car_Dropdown > ul").append(e);var c=""==$("#Car_Badge").text()?1:parseInt($("#Car_Badge").text())+1;$("#Car_Badge").text(c.toString()),$("#Car_Dropdown_Null").hasClass("d-none")||($("#Car_Dropdown_Null").addClass("d-none"),$("#Car_Dropdown > .btn_car_buy").removeAttr("disabled"))}function CartDropUpdate(t){$("#Car_Dropdown > ul > li").each((function(){var e=$(this);e.data("scid")==t.scId&&e.find(".pro_quantity").text(t.quantity)}))}function CartDropReset(t,e){$("#Car_Dropdown > ul > li").each((function(){$(this).data("scid")==t&&(0==e?($(this).remove(),$("#Car_Badge").text($("#Car_Badge").text()-1)):$(this).find(".pro_quantity").text(e))}))}function CartDropDelete(t,e,n,a){t.remove(),Product.Delete.Cart(e).done((function(){Coker.sweet.success(n,null,!0);var t=parseInt($("#Car_Badge").text())-1;$("#Car_Badge").text(t.toString()),0==parseInt($("#Car_Badge").text())&&CartClear()})).fail((function(){Coker.sweet.error("錯誤",a,null,!0)}))}function CartClear(){$("#Car_Dropdown > ul > li").remove(),$("#Car_Badge").text(""),$("#Car_Dropdown_Null").removeClass("d-none"),$("#Car_Dropdown > .btn_car_buy").attr("disabled","")}